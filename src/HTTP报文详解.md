# HTTP报文详解
[HTTP报文详解](#http报文详解)   
- [报文流](#报文流)        
- [报文组成](#报文组成)          
- [参考](#参考)

HTTP是超文本传输协议（HyperText Transfer Protocol），处在网络四层架构的应用层。

HTTP报文由简单字符串组成的文本，HTTP报文是对HTPP请求的额外描述，方便客户端和服务器解析，开发者可以通过报文进行开发调试，报文分为请求报文和相应报文。

#### 报文流

报文是流动在客户端和服务器之间的数据块，数据块是对报文内容和含义的描述。

报文使用流入和流出表示报文的方向，发起端作为报文的上流，相应端作为报文的下游。报文总是从发起端流入相应端。

客户端发起请求：客户端作为报文上游，服务器是报文的下游，报文从客户端流向服务器。

服务器相应阶段：服务器作为报文的上游，客户端作为报文的下游，报文从服务器流向客户端。

#### 报文组成

一个完整的报文由起始行，首部，可选的报文主体3部分组成：

- 起始行

报文分为请求报文和相应报文，起始报文是报文的第一行字符串，起始报文说明报文要处理的内容，相应报文返回服务器发生了什么。

- 首部字段

完整的报文包含0个或者多个分行的ASCII文本首部字段组成，为了方便服务器解析，首部字段由:隔开的键和值两部分组成，首部以一个空行结束。首部字段可以为空。

- 报文主体

 报文主体和首部用空行隔开，报文主体是服务器相应的资源，可以是任何形式的数据，包括字符串，html等文本形式，也可以是二进制形式，文本形式可以为空，比如HTTP协议的[OPTIONS](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/OPTIONS)方法就是一个返回主体为空的请求。

![HTTP首部](https://github.com/bojue/Blogs/blob/master/assets/http_header.png)

#### 报文语法

报文根据请求报文和相应报文存在不同的报文语法。

* 请求报文

    <method><request-URL><version>
    <headers>
    <entrty-body>

* 相应报文

    <version><satatus><reaspon-pharse>
    <headers>
    <entrty-body>

| 字段 | 名称 | 描述 |
|-----|-----|-----|
| method | 方法| 客户端发起的请求方式，比如GET,PUT,POST,DELETE|
| request-URL | 请求URL |请求资源的绝对路径|
| version | HTTP版本 | 常见的版本：HTTP1.0, HTTP1.1,HTTP2.0 |
| status | 状体码 | 服务器相应的状体码，用3位数字描述的请求结果，常见的200标示请求成功，404未找到资源，304本地缓存 |
| reason-pharse | 原因短语 | 描述status的原因文本，对开发者提供的可读性友好的请求状体描述 |
| headers | 首部 | 包含0个或者多个首部，与主体使用空格隔开，HTTP0.9版本不包含首部，HTTP1.1版本有效请求和相应必须包含特定的首部 |
| entity-body | 实体主体部分 | 任意格式的数据组成，不是必须的 |

#### 参考
1. [HTTP报文详情](https://www.cnblogs.com/klguang/p/4618526.html)
2. [HTTP权威指南](https://book.douban.com/subject/10746113/)